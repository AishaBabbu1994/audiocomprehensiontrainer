<button onclick="record()">ğŸ™ï¸ Grabar respuesta</button>
<button onclick="send()">Evaluar</button>

<script>
let transcript = "";

function record() {
  const rec = new webkitSpeechRecognition();
  rec.lang = "es-ES";
  rec.onresult = e => {
    transcript = e.results[0][0].transcript;
    alert("TranscripciÃ³n lista");
  };
  rec.start();
}

async function send() {
  const res = await fetch("/api/evaluate", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({
      original: document.getElementById("text").value,
      transcription: transcript
    })
  });

  const data = await res.json();
  alert(`ComprensiÃ³n: ${data.score}%\n${data.feedback}`);
}
</script>
